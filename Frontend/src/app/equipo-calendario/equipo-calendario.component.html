<app-header></app-header>

<div class="equipo-wrapper">
  <header class="page-header">
    <div class="header-info">
      <h1>ðŸ“… Calendario del equipo</h1>
      <p class="subtitle" *ngIf="equipo">{{ equipo.nombre }} Â· GestiÃ³n de temporada</p>
    </div>

    <div class="header-actions">
      <button 
        class="btn-action primary" 
        *ngIf="authService.hasRole('entrenador') || authService.hasRole('admin_plataforma')"
        [disabled]="!equipo"
        (click)="abrirModalCrearConvocatoria()">
        + Convocatoria
      </button>

      <button 
        class="btn-action primary" 
        *ngIf="authService.hasRole('entrenador') || authService.hasRole('admin_plataforma')"
        [disabled]="!equipo"
        (click)="abrirModalCrearEvento()">
        + Evento
      </button>

      <button class="btn-action outline" (click)="descargarICal()">
        ðŸ”— Exportar iCal
      </button>
    </div>
  </header>

  <main class="calendar-card">
    <div *ngIf="loading" class="loading-state">
      <div class="spinner"></div>
      <p>Sincronizando calendario...</p>
    </div>

    <ng-container *ngIf="isBrowser">
      <full-calendar
        *ngIf="!loading"
        [options]="calendarOptions">
      </full-calendar>
    </ng-container>

    <div *ngIf="!isBrowser" class="loading-state">
      <p>Cargando visor de eventos...</p>
    </div>
  </main>
</div>